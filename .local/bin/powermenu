#!/bin/sh

host=$(cat /etc/hostname)

if [ "$XDG_SESSION_TYPE" = "x11" ]; then
    option=$(printf 'Lock Screen\nPower Off\nReboot\nSuspend' | dmenu -c -i -l 4 -p "What do you want to do?")
    LOCK="slock"
else
    option=$(printf 'Lock Screen\nPower Off\nReboot\nSuspend' | bemenu --fixed-height -W 0.3 -c -i -l 4 -H 36 -p "What do you want to do? ")
    LOCK="waylock -fail-color 0xfb4934 -init-color 0x282828 -input-color 0xd65d0e -ignore-empty-password -fork-on-lock"
fi

case $option in
"Power Off") systemctl poweroff ;;
"Reboot") systemctl reboot ;;
"Suspend")
    if [ "$XDG_SESSION_TYPE" = "x11" ] && [ "$host" = "desktop" ]; then
        notify-send "Suspend does not work on x11 for you" && exit 1
    else
        $LOCK & systemctl suspend
    fi ;;
"Lock Screen") $LOCK ;;
*) ;;
esac
