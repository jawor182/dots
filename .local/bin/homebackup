#!/bin/bash

dirs=("$HOME/dox/" "$HOME/repos/" "$HOME/keepassxc/")
targetDir="/mnt/backup/"
currentDate=$(date "+%F")
backupFile="backup-$currentDate.tar.gz"
outputFile="$targetDir/$backupFile"

[ ! -d $targetDir ] && echo "Could not find target directory" && exit 1
[ -f "$outputFile" ] && echo "Backup for today ($currentDate) already exists" && exit 1

echo "ğŸ”„ Starting backup: ${outputFile}"

if tar -czvf "$outputFile" --exclude="$HOME/dox/ISO" "${dirs[@]}"; then
    echo "âœ… Backup completed successfully!"
    echo "ğŸ“¦ Saved to: $outputFile"
else
    echo "âŒ Backup failed!"
    exit 1
fi
