#!/usr/bin/env bash

os_id=$(grep ^ID= /etc/os-release | cut -d= -f2)
if [ "$os_id" = "arch" ]; then
    packages="$HOME/dots/.local/share/cave/arch/packages.txt"
    yayPackages="$HOME/dots/.local/share/cave/arch/yay-packages.txt"
else
    packages="$HOME/dots/.local/share/cave/artix/packages.txt"
    yayPackages="$HOME/dots/.local/share/cave/artix/yay-packages.txt"
fi

sudo pacman -Syyuu --needed $(cat "$packages")

if [ ! -d "$HOME/.local/yay" ]; then
    setup-yay
fi

yay -Syu --needed $(cat "$yayPackages")
